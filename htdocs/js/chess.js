(function(){"use strict";var a=[],b,c,d,e,f;window.highlightMoves=b=function(b,d){var f,g,h,i,j,k=function(a){return function(){e(a)}};if(a.length===0){f=availableMoves["x"+b+"y"+d];if(f!=null)for(g=0;g<f.length;g++)i=f[g].x,j=f[g].y,h=$("#x"+i+"y"+j),a.push({ele:h,x:i,y:j}),h[0].onclick=k({x:b,y:d,toX:i,toY:j}),h.addClass("chessHighlight")}else c()},c=function(){var c,d=function(a,c){return function(){b(a,c)}};while((c=a.pop())!=null)c.ele.removeClass("chessHighlight"),c.ele[0].onclick=d(c.x,c.y)},d=document.getElementsByTagName("body")[0].textContent==null?function(a,b){return a.getElementsByTagName(b)[0].text}:function(a,b){return a.getElementsByTagName(b)[0].textContent},e=function(a){$.get(submitMoveHREF,a,f,"xml")},f=function(a){var b,e,f,g,h;c();var i=a.getElementsByTagName("TILE");for(f=0;f<i.length;f++){b=d(i[f],"X"),e=d(i[f],"Y"),$("#x"+b+"y"+e).html(d(i[f],"INNER_HTML")),availableMoves["x"+b+"y"+e]=[],h=i[f].getElementsByTagName("POSSIBLE_MOVE");for(g=0;g<h.length;g++)availableMoves["x"+b+"y"+e].push({x:d(h[g],"MOVE_X"),y:d(h[g],"MOVE_Y")})}$("#moveTable").html(d(a,"MOVE_TABLE")),$("#turn").html(d(a,"TURN")),a.getElementsByTagName("MOVE_MESSAGE").length>0&&alert(d(a,"MOVE_MESSAGE"))}})()