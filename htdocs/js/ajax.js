(function(){"use strict";var a,b,c=!0,d=!0,e=!1,f,g,h,i,j,k;window.onfocus=function(){e||(c=!0,clearTimeout(a),i())},window.onblur=function(){c=!1},window.onunload=j=function(){clearTimeout(a),e=!0,c=!1,f!==null&&f.abort()},k=function(a){var b=!1,c=window.location.href,d;if(c.indexOf("?")>-1){var e,f=c.substr(c.indexOf("?")),g=f.split("&");for(e=0;e<g.length;e++)if(g[e].toUpperCase().indexOf(a.toUpperCase()+"=")>-1){d=g[e].split("="),b=d[1];break}}return b},h=function(e,f,g){var h=$("all > *",e).each(function(a,b){b.tagName==="JS"?$(b.childNodes).each(function(a,b){b.tagName==="ALERT"&&$(JSON.parse($(b).text())).each(function(a,b){alert(b)}),window[b.tagName]=JSON.parse($(b).text())}):$("#"+b.tagName).html($(b).text())});h.length!==0&&(d=!0,c===!0&&(clearTimeout(a),a=setTimeout(i,b)))},i=function(){c===!0&&d===!0&&(d=!1,f=$.get("",{sn:g,ajax:1},h,"xml"))};var l=[],m,n,o;window.highlightMoves=m=function(a,b){var c,d,e,f,g,h=function(a){return function(){o(a)}};if(l.length===0){c=availableMoves["x"+a+"y"+b];if(c!=null)for(d=0;d<c.length;d++)f=c[d].x,g=c[d].y,e=$("#x"+f+"y"+g),l.push({ele:e,x:f,y:g}),e[0].onclick=h({x:a,y:b,toX:f,toY:g}),e.addClass("chessHighlight")}else n()},n=function(){var a,b=function(a,b){return function(){m(a,b)}};while((a=l.pop())!=null)a.ele.removeClass("chessHighlight"),a.ele[0].onclick=b(a.x,a.y)},o=function(a){$.get(submitMoveHREF,a,function(a,b,c){n(),h(a,b,c)},"xml")},window.startRefresh=function(a){if(!a)return;b=a,g=k("sn");if(g===!1)return;i()},$(function(){$("a").each(function(a,b){b.onmouseup=function(){linkFollowed=!0,j()}})})})(),window.toggleWepD=function(a){$(".wep1:visible").slideToggle(600),$(".wep1:hidden").fadeToggle(600),$.get(a)};var linkFollowed=!1;window.followLink=function(a){return function(){linkFollowed!==!0&&(linkFollowed=!0,window.location.href=a,stopAJAX())}}