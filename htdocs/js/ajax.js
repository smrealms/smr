(function(){"use strict";var a,b,c=!0,d=!0,e=!1,f,g,h,i,j,k;window.onfocus=function(){e||(c=!0,clearTimeout(a),i())},window.onblur=function(){c=!1},window.onunload=window.stopAJAX=j=function(){clearTimeout(a),e=!0,c=!1,f!==null&&f.abort()},k=function(a){var b=!1,c=window.location.href,d;if(c.indexOf("?")>-1){var e,f=c.substr(c.indexOf("?")),g=f.split("&");for(e=0;e<g.length;e++)if(g[e].toUpperCase().indexOf(a.toUpperCase()+"=")>-1){d=g[e].split("="),b=d[1];break}}return b},h=function(e,f,g){var h=$("all > *",e).each(function(a,b){b.tagName==="JS"?$(b.childNodes).each(function(a,b){b.tagName==="ALERT"&&$(JSON.parse($(b).text())).each(function(a,b){alert(b)}),window[b.tagName]=JSON.parse($(b).text())}):$("#"+b.tagName).html($(b).text())});h.length!==0&&(d=!0,c===!0&&(clearTimeout(a),a=setTimeout(i,b)))},i=function(){c===!0&&d===!0&&(d=!1,f=$.get("",{sn:g,ajax:1},h,"xml"))};var l=[],m,n,o;o=function(a){return function(){n.call(this,a)}},n=function(a){var b=$(this);a.toX=b.data("x"),a.toY=b.data("y"),$.get(submitMoveHREF,a,function(a,b,c){m(),h(a,b,c)},"xml")},window.highlightMoves=m=function(){var a,b,c,d,e=$(".chessHighlight");e.length===0?(a=$(this),b=a.data("x"),c=a.data("y"),d=o({x:b,y:c}),$(availableMoves[c][b]).addClass("chessHighlight").each(function(a,b){b.onclick=d})):e.removeClass("chessHighlight").each(function(a,b){b.onclick=m})},window.startRefresh=function(a){if(!a)return;b=a,g=k("sn");if(g===!1)return;i()},$(function(){$("a").each(function(a,b){b.onmouseup=function(){linkFollowed=!0,j()}})})})(),window.toggleWepD=function(a){"use strict",$(".wep1:visible").slideToggle(600),$(".wep1:hidden").fadeToggle(600),$.get(a)};var linkFollowed=!1;window.followLink=function(a){return"use strict",function(){linkFollowed!==!0&&(linkFollowed=!0,window.location.href=a,window.stopAJAX())}}