var exec=function(s){eval(s)};(function(){"use strict";var e,t,n,r=!0,i=!0,s=!1,o,u,a,f,l,c;e=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(this,t)}},window.onfocus=function(){s||(r=!0,clearTimeout(t),f())},window.onblur=function(){r=!1},window.onunload=window.stopAJAX=l=function(){clearTimeout(t),s=!0,r=!1,o!==null&&o.abort()},c=function(e){var t=!1,n=window.location.href,r;if(n.indexOf("?")>-1){var i,s=n.substr(n.indexOf("?")),o=s.split("&");for(i=0;i<o.length;i++)if(o[i].toUpperCase().indexOf(e.toUpperCase()+"=")>-1){r=o[i].split("="),t=r[1];break}}return t},a=function(e,s,o){var u=$("all > *",e).each(function(e,t){t.tagName==="JS"?$(t.childNodes).each(function(e,t){t.tagName==="EVAL"?exec($(t).text()):(t.tagName==="ALERT"&&$(JSON.parse($(t).text())).each(function(e,t){alert(t)}),window[t.tagName]=JSON.parse($(t).text()))}):$("#"+t.tagName).html($(t).text())});u.length!==0&&(i=!0,r===!0&&(clearTimeout(t),t=setTimeout(f,n)))},f=function(){r===!0&&i===!0&&(i=!1,o=$.get("",{sn:u,ajax:1},a,"xml"))};var h=[],p,d;d=function(e){var t=$(this);e.toX=t.data("x"),e.toY=t.data("y"),$.get(submitMoveHREF,e,function(e,t,n){p(),a(e,t,n)},"xml")},window.highlightMoves=p=function(){var t,n,r,i,s=$(".chessHighlight");s.length===0?(t=$(this),n=t.data("x"),r=t.data("y"),i=e(d,{x:n,y:r}),$(availableMoves[r][n]).addClass("chessHighlight").each(function(e,t){t.onclick=i})):s.removeClass("chessHighlight").each(function(e,t){t.onclick=p})},window.startRefresh=function(e){if(!e)return;n=e,u=c("sn");if(u===!1)return;f()},$(function(){$("a").each(function(e,t){t.onmouseup=function(){linkFollowed=!0,l()}})})})(),window.toggleWepD=function(e){"use strict";$(".wep1:visible").slideToggle(600),$(".wep1:hidden").fadeToggle(600),$.get(e)};var linkFollowed=!1;window.followLink=function(e){"use strict";return function(){linkFollowed!==!0&&(linkFollowed=!0,window.location.href=e,window.stopAJAX())}}