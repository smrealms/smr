(function(){"use strict";var a,b,c,d=!0,e=!0,f=!1,g,h,i,j,k,l;a=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(this,b)}},window.onfocus=function(){f||(d=!0,clearTimeout(b),j())},window.onblur=function(){d=!1},window.onunload=window.stopAJAX=k=function(){clearTimeout(b),f=!0,d=!1,g!==null&&g.abort()},l=function(a){var b=!1,c=window.location.href,d;if(c.indexOf("?")>-1){var e,f=c.substr(c.indexOf("?")),g=f.split("&");for(e=0;e<g.length;e++)if(g[e].toUpperCase().indexOf(a.toUpperCase()+"=")>-1){d=g[e].split("="),b=d[1];break}}return b},i=function(a,f,g){var h=$("all > *",a).each(function(a,b){b.tagName==="JS"?$(b.childNodes).each(function(a,b){b.tagName==="ALERT"&&$(JSON.parse($(b).text())).each(function(a,b){alert(b)}),window[b.tagName]=JSON.parse($(b).text())}):$("#"+b.tagName).html($(b).text())});h.length!==0&&(e=!0,d===!0&&(clearTimeout(b),b=setTimeout(j,c)))},j=function(){d===!0&&e===!0&&(e=!1,g=$.get("",{sn:h,ajax:1},i,"xml"))};var m=[],n,o;o=function(a){var b=$(this);a.toX=b.data("x"),a.toY=b.data("y"),$.get(submitMoveHREF,a,function(a,b,c){n(),i(a,b,c)},"xml")},window.highlightMoves=n=function(){var b,c,d,e,f=$(".chessHighlight");f.length===0?(b=$(this),c=b.data("x"),d=b.data("y"),e=a(o,{x:c,y:d}),$(availableMoves[d][c]).addClass("chessHighlight").each(function(a,b){b.onclick=e})):f.removeClass("chessHighlight").each(function(a,b){b.onclick=n})},window.startRefresh=function(a){if(!a)return;c=a,h=l("sn");if(h===!1)return;j()},$(function(){$("a").each(function(a,b){b.onmouseup=function(){linkFollowed=!0,k()}})})})(),window.toggleWepD=function(a){"use strict",$(".wep1:visible").slideToggle(600),$(".wep1:hidden").fadeToggle(600),$.get(a)};var linkFollowed=!1;window.followLink=function(a){return"use strict",function(){linkFollowed!==!0&&(linkFollowed=!0,window.location.href=a,window.stopAJAX())}}